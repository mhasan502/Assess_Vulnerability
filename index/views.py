from django.contrib.auth import logout
from django.contrib.auth.decorators import login_required
from django.shortcuts import render, redirect
from villages.models import Villages
from chairmen.models import Chairmen


# Index View
def IndexView(request):
    total_villages = Villages.objects.all().count()
    total_chairmen = Chairmen.objects.all().count()
    data = {
        'total_villages': total_villages,
        'total_chairmen': total_chairmen,
    }
    return render(request, 'index.html', data)

    # def dispatch(self, request, *args, **kwargs):         # To redirect non logged in user to login page
    #     if not request.user.is_authenticated:
    #         return redirect('login')


# Logout Functionality
@login_required
def logout_view(request):
    logout(request)
    return redirect('index')
