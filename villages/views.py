from django.shortcuts import render, redirect
from villages.models import Villages, Upazilas


def VillageView(request):
    villages = Villages.objects.all()
    return render(request, 'villages.html', {'villages': villages})


def SaveVillage(request):
    district_data = request.GET.get('district')
    upazila_data = request.GET.get('upazila')
    union_data = request.GET.get('union')
    village_data = request.GET.get('village')
    village = Villages.objects.create(
        district_id=district_data,
        name=village_data,
        upazila_id=upazila_data,
        union_id=union_data
    )
    village.save()


def DeleteVillage(request, key):
    query = Villages.objects.get(id=key)
    query.delete()
    print(query)
    return redirect('villages')
