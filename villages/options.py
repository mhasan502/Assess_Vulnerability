from rest_framework.response import Response
from rest_framework.views import APIView
from rest_framework.permissions import AllowAny
from villages.serializers import DataSerializer
from villages.models import Districts, Upazilas, Unions


class DistrictList(APIView):
    permission_classes = [AllowAny]

    def get(self, requests):
        result = Districts.objects.all()
        serializer = DataSerializer(result, many=True)
        return Response(serializer.data)


class UpazilaList(APIView):
    permission_classes = [AllowAny]

    def get(self, requests, district):
        result = Upazilas.objects.filter(district_id=district)
        serializer = DataSerializer(result, many=True)
        return Response(serializer.data)


class UnionList(APIView):
    permission_classes = [AllowAny]

    def get(self, requests, upazila):
        result = Unions.objects.filter(upazila_id=upazila)
        serializer = DataSerializer(result, many=True)
        return Response(serializer.data)
