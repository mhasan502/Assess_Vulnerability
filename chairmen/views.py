import string
from django.http import JsonResponse
from django.shortcuts import render
from django.contrib.auth.base_user import BaseUserManager
from chairmen.models import Chairmen


def ChairmenView(request):
    password = BaseUserManager().make_random_password(8, string.ascii_lowercase)
    return render(request, 'chairmen.html', {'password': password})


def SaveChairman(request):
    name_data = request.GET.get('name')
    email_data = request.GET.get('email')
    password_data = request.GET.get('password')
    union_data = request.GET.get('union')
    chairman = Chairmen.objects.create(
        name=name_data,
        email=email_data,
        password=password_data,
        union_id=union_data
    )
    chairman.save()
    data = {
        'chairman_saved': True
    }
    return JsonResponse(data)