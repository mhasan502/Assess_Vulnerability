from rest_framework.response import Response
from rest_framework.views import APIView
from rest_framework.permissions import AllowAny
from api.serializers import DistrictSerializer, UpazilaSerializer, UpnionSerializer, VillageSerializer
from villages.models import Districts, Upazilas, Unions, Villages


class DistrictList(APIView):
    permission_classes = [AllowAny]

    def get(self, requests):
        result = Districts.objects.all()
        serializer = DistrictSerializer(result, many=True)
        return Response(serializer.data)


class UpazilaList(APIView):
    permission_classes = [AllowAny]

    def get(self, requests, district):
        result = Upazilas.objects.filter(district_id=district)
        serializer = UpazilaSerializer(result, many=True)
        return Response(serializer.data)


class UnionList(APIView):
    permission_classes = [AllowAny]

    def get(self, requests, upazila):
        result = Unions.objects.filter(upazila_id=upazila)
        serializer = UpnionSerializer(result, many=True)
        return Response(serializer.data)


class VillageList(APIView):
    permission_classes = [AllowAny]

    def get(self, requests, village):
        result = Villages.objects.filter(id=village)
        serializer = VillageSerializer(result, many=True)
        return Response(serializer.data)
